---
phase: 04-templates-discovery
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/templates.ts
  - src/components/templates/template-card.tsx
  - src/components/templates/template-preview.tsx
  - src/components/templates/template-gallery.tsx
autonomous: true

must_haves:
  truths:
    - "Template data exists with proper TypeScript types"
    - "Gallery components render without errors"
    - "Preview modal shows animated template using PreviewPlayer"
  artifacts:
    - path: "src/lib/templates.ts"
      provides: "Template definitions and types"
      exports: ["Template", "TEMPLATES", "CATEGORIES", "getTemplateById", "getTemplatesByCategory"]
    - path: "src/components/templates/template-gallery.tsx"
      provides: "Main gallery with tabs filtering"
      min_lines: 40
    - path: "src/components/templates/template-card.tsx"
      provides: "Individual template card"
      min_lines: 30
    - path: "src/components/templates/template-preview.tsx"
      provides: "Preview modal with PreviewPlayer"
      min_lines: 40
  key_links:
    - from: "src/components/templates/template-card.tsx"
      to: "src/lib/templates.ts"
      via: "imports Template type"
      pattern: "import.*Template.*from.*templates"
    - from: "src/components/templates/template-preview.tsx"
      to: "src/components/preview/preview-player.tsx"
      via: "uses PreviewPlayer component"
      pattern: "PreviewPlayer"
---

<objective>
Create template definitions and reusable gallery components for browsing and previewing templates.

Purpose: Establishes the foundation for template discovery - typed template data and UI components that can be composed into the /templates page.
Output: Template definitions in src/lib/templates.ts, gallery components in src/components/templates/
</objective>

<execution_context>
@/Users/Kohelet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/Kohelet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-templates-discovery/04-RESEARCH.md
@src/remotion/compositions/TextAnimation.tsx
@src/components/preview/preview-player.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install shadcn components</name>
  <files>
    src/components/ui/tabs.tsx
    src/components/ui/dialog.tsx
  </files>
  <action>
Install required shadcn components:
```bash
npx shadcn@latest add tabs dialog
```

This installs the Tabs and Dialog components needed for template gallery UI.
  </action>
  <verify>
    Verify installation: `ls src/components/ui/tabs.tsx src/components/ui/dialog.tsx` both exist
  </verify>
  <done>
    shadcn tabs and dialog components installed in src/components/ui/
  </done>
</task>

<task type="auto">
  <name>Task 2: Create template definitions</name>
  <files>
    src/lib/templates.ts
  </files>
  <action>
Create `src/lib/templates.ts` with:
- Template interface extending TextAnimationProps with metadata (id, name, description, category)
- TEMPLATES array with 8 diverse templates across 4 categories:
  * social: "Bold Announcement" (scale), "Story Text" (fade-in)
  * business: "Corporate Title" (slide-up), "Presentation Text" (fade-in)
  * creative: "Neon Glow" (scale), "Typewriter Effect" (typewriter)
  * minimal: "Minimal Fade" (fade-in), "Clean Slide" (slide-up)
- CATEGORIES array with {id, label} objects including "all" option
- getTemplateById(id) helper function
- getTemplatesByCategory(category) helper function
- Category type derived from CATEGORIES

Use `as const satisfies readonly Template[]` for type safety.
Import TextAnimationProps from "@/remotion/compositions/TextAnimation".
  </action>
  <verify>
    `npx tsc --noEmit` passes with no type errors in templates.ts
  </verify>
  <done>
    8 templates defined with proper types, helper functions exported
  </done>
</task>

<task type="auto">
  <name>Task 3: Create template gallery components</name>
  <files>
    src/components/templates/template-card.tsx
    src/components/templates/template-preview.tsx
    src/components/templates/template-gallery.tsx
  </files>
  <action>
1. Create `src/components/templates/template-card.tsx`:
   - TemplateCardProps: template, onSelect, onPreview callbacks
   - Card with CardHeader (name, description) and CardContent
   - Static color preview div showing backgroundColor + color + truncated text
   - Two buttons: "Preview" (calls onPreview) and "Use Template" (calls onSelect)
   - Use e.stopPropagation() on buttons to prevent card click bubbling
   - Card onClick triggers onPreview

2. Create `src/components/templates/template-preview.tsx`:
   - TemplatePreviewProps: template (Template | null), open, onOpenChange, onUseTemplate
   - Dialog with DialogContent (max-w-3xl for adequate preview size)
   - DialogHeader with template name/description
   - PreviewPlayer with template.props for animated preview
   - DialogFooter with Cancel and "Use This Template" buttons
   - Return null if template is null

3. Create `src/components/templates/template-gallery.tsx`:
   - useState for previewTemplate (Template | null)
   - useState for category filter (default "all")
   - Tabs component with TabsList containing TabsTrigger for each category
   - Responsive grid: grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4
   - Map filteredTemplates to TemplateCard components
   - TemplatePreview modal (open when previewTemplate is set)
   - handleUseTemplate function - for now just console.log (wiring in Plan 02)

Import path conventions:
- Use "@/components/ui/..." for shadcn components
- Use "@/lib/templates" for template data
- Use "@/components/preview/preview-player" for PreviewPlayer
  </action>
  <verify>
    `npx tsc --noEmit` passes with no type errors. Components can be imported without errors.
  </verify>
  <done>
    Three template components created: template-card.tsx, template-preview.tsx, template-gallery.tsx. All properly typed and using existing PreviewPlayer.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` - TypeScript compilation passes
2. `npm run build` - Next.js build succeeds (components are valid)
3. Templates file exports all expected items: Template type, TEMPLATES array, CATEGORIES, helper functions
</verification>

<success_criteria>
- 8 templates defined across 4 categories with valid TextAnimationProps
- TemplateGallery component renders tabs and grid layout
- TemplateCard shows static preview with action buttons
- TemplatePreview shows animated preview using existing PreviewPlayer
- All components compile without TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-templates-discovery/04-01-SUMMARY.md`
</output>
